# Домашнее задание к занятию "5. Оркестрация кластером Docker контейнеров на примере Docker Swarm"


### Задача №1

* В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?
* Какой алгоритм выбора лидера используется в Docker Swarm кластере?
* Что такое Overlay Network?

Решение:

* Основное отличие режима replication от global  в том что в режиме  global реплики ставятся на все ноды, а в режиме replication можно задать число реплик через конфиг.
* При сбое ноды лидера, оставшиеся ноды согласуют меджу собой лидерство по протоколу raft. После согласования одна из нод становится лидером.
* Оверлейная сеть предполагает под собой многоступенчатость и позволяет контейнерам общаться между собой и видеть друг друга и в кластере.

### Задача №2

Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

Решение:

![Screenshot from 2022-09-28 12-49-14](https://user-images.githubusercontent.com/92155007/192739361-08a5f7bb-8cff-4efe-bc5f-e3dcf4b159eb.png)


### Задача №3

Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

Решение:

![Screenshot from 2022-09-28 12-50-04](https://user-images.githubusercontent.com/92155007/192739410-cc24f984-a32d-4769-97ef-94bb63b65c00.png)


### Задача №4

Выполнить на лидере Docker Swarm кластера команду и дать письменное описание её функционала, что она делает и зачем она нужна.

Решение:

Команда docker swarm update --autolock=true блокирует docker swarm с помощью журналов Raft которая хранят ключи доступа на все ноды. После перезагрузки докера доступ к нодам можно получить только введя ключ. Это существенно повышает безопасность кластера от взлома. Блокировка и разблокировка кластера осуществляется как на скрине ниже.

![Screenshot from 2022-09-28 13-06-19](https://user-images.githubusercontent.com/92155007/192739447-592de8ea-24ec-495e-b989-0973c5825d8c.png)
